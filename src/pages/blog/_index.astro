---
import { getCollection } from 'astro:content'
import BaseLayout from '../../layouts/BaseLayout.astro'
import Header from '@components/page/Header.astro'
import Section from '@components/page/Section.astro'
import Article from '@components/page/Article.astro'
const title = 'Blog'
const description = 'Kommentare, Einordnungen und der ganze Rest'
const openGraph = { title, description }
const posts = await getCollection('posts', (post) => !post.data.draft)
posts.sort((a, b) => b.data.publishedTime.valueOf() - a.data.publishedTime.valueOf())
---

<BaseLayout {title} {description} {openGraph}>
  <Header {title} {description} />
  <Section title="BeitrÃ¤ge">
    {
      posts.map(({ data, slug }) => (
        <Article title={data.title} href={'/blog/' + slug}>
          <p class="content">{data.summary}</p>
        </Article>
      ))
    }
  </Section>
</BaseLayout>
