---
import { getCollection } from 'astro:content'
import Section from '@components/page/Section.astro'
import ProductPreview from '@components/products/ProductPreview.astro'
type Props = {
  collection: 'coachings' | 'courses' | 'trainings' | 'services'
  basePath?: string
}
const { collection, basePath }: Props = Astro.props
const products = await getCollection(collection)
products.sort(function ({ data: a }, { data: b }) {
  if (a.order !== b.order) {
  return a.order - b.order
  }
  if (a.title === b.title) {
  return 0
  }
  return a.title > b.title ? 1 : -1
  })
---
<Section title="Angebote">
{products.map((product) => <ProductPreview {product} basePath={basePath ?? Astro.url.pathname} />)}
</Section>
